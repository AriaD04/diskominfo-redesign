<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Statistik Penduduk - Kelurahan Tanjungpinang Kota</title>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Bootstrap Icons -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
      rel="stylesheet"
    />
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- AOS Animation -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
    <!-- Animate.css -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />

    <link rel="stylesheet" href="assets/css/style.css" />

    <style>
      :root {
        --primary: #0d6efd;
        --primary-light: #e7f1ff;
        --primary-dark: #0b5ed7;
        --secondary: #6c757d;
        --success: #198754;
        --info: #0dcaf0;
        --warning: #ffc107;
        --danger: #dc3545;
        --light: #f8f9fa;
        --dark: #212529;
        --dark-blue: #1a237e;
        --teal: #20c997;
        --indigo: #6610f2;
      }

      /* Salin dan tempel kode ini ke dalam tag <style> di data-statistik.html */

      .title-highlight {
        background: linear-gradient(45deg, #ffc107, #fff, #ffc107);
        background-size: 200% 200%;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        animation: gradient-text 3s ease infinite;
        text-shadow: none !important;
      }

      @keyframes gradient-text {
        0%,
        100% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
      }
      /* PERBAIKAN WARNA TEKS RINGKASAN STATISTIK */
      .stat-summary-title {
        color: var(--dark); /* Warna teks menjadi gelap agar terlihat */
      }

      .stat-summary-title i {
        color: var(--primary); /* Warna ikon menjadi biru */
      }
      /* PERBAIKAN WARNA PERSENTASE GENDER */
      .gender-percentage-male {
        color: var(--primary); /* Warna biru */
      }

      .gender-percentage-female {
        color: var(--danger); /* Warna merah */
      }
      /* body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background-color: #f8f9fa;
            padding-top: 80px;
            color: #333;
            line-height: 1.6;
        } */

      

      .hero-section {
        position: relative;
        padding: 120px 0 80px;
        background: var(
          --gradient-primary
        ); /* Menggunakan gradien merah dari root */
        color: white;
        overflow: hidden;
        margin-bottom: 2rem;
      }

      .hero-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(
          0,
          0,
          0,
          0.2
        ); /* Slightly lighter overlay for better contrast */
        z-index: 1;
      }

      .hero-badge {
        display: inline-block;
        background: rgba(255, 255, 255, 0.2);
        color: white;
        padding: 8px 15px;
        border-radius: 50px;
        font-size: 0.9rem;
        margin-bottom: 15px;
      }
      .hero-title {
        font-family: "Poppins", sans-serif; /* Menyamakan jenis huruf */
        font-weight: 700; /* Menyamakan ketebalan */
        text-shadow: 1, 5rem; /* Menghapus bayangan */
        margin-bottom: 1.5rem;
        font-size: 2.75rem; /* Menyamakan ukuran dari galeri.html */
        line-height: 1.2; /* Menyamakan spasi baris */
      }

      .hero-subtitle {
        font-weight: 400;
        opacity: 0.9;
        max-width: 700px;
        margin: 0 auto 2rem;
      }

      /* Stat Cards */
      .stat-card {
        border-radius: 16px;
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08);
        transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
        border: none;
        margin-bottom: 2rem;
        overflow: hidden;
        position: relative;
        z-index: 1;
      }

      .stat-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.1) 0%,
          rgba(255, 255, 255, 0) 100%
        );
        z-index: -1;
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .stat-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 12px 25px rgba(0, 0, 0, 0.15);
      }

      .stat-card:hover::before {
        opacity: 1;
      }

      .chart-container {
        position: relative;
        height: 320px;
        margin: 0 -1rem;
      }

      .year-card {
        /* Hapus atau komentari baris di bawah ini */
        /* border-left: 5px solid var(--primary); */
        transition: all 0.4s ease;
      }

      .year-card:hover {
        background-color: var(--primary-light);
        transform: scale(1.02);
      }

      .percentage-change {
        font-weight: 600;
        transition: all 0.3s ease;
      }

      .decrease {
        color: var(--danger);
      }

      .increase {
        color: var(--success);
      }

      /* Section Titles */
      .section-title {
        position: relative;
        padding-bottom: 15px;
        margin-bottom: 2rem;
        font-weight: 700;
        display: inline-block; /* <-- TAMBAHKAN BARIS INI */
      }

      .section-title:after {
        content: "";
        position: absolute;
        left: 0;
        bottom: 0;
        width: 100%; /* <-- UBAH BARIS INI DARI 70px MENJADI 100% */
        height: 4px;
        background: linear-gradient(90deg, var(--primary), var(--teal));
        border-radius: 2px;
      }

      /* Animated Counter */
      .counter {
        font-weight: 700;
        color: var(--primary);
      }

      /* Floating Elements */
      .floating {
        animation: floating 3s ease-in-out infinite;
      }

      @keyframes floating {
        0% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-10px);
        }
        100% {
          transform: translateY(0px);
        }
      }

      /* Pulse Animation */
      .pulse {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% {
          box-shadow: 0 0 0 0 rgba(13, 110, 253, 0.4);
        }
        70% {
          box-shadow: 0 0 0 10px rgba(13, 110, 253, 0);
        }
        100% {
          box-shadow: 0 0 0 0 rgba(13, 110, 253, 0);
        }
      }

      /* Footer */
      .footer {
        background: linear-gradient(135deg, var(--dark) 0%, #1a1e21 100%);
        color: white;
        padding: 4rem 0 2rem;
        position: relative;
        clip-path: polygon(0 10%, 100% 0, 100% 100%, 0 100%);
        margin-top: 4rem;
      }

      .footer::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path fill="rgba(255,255,255,0.03)" d="M0,0 L100,0 L100,100 L0,100 Z"></path></svg>');
        background-size: cover;
        opacity: 0.1;
      }

      .footer-links a {
        color: rgba(255, 255, 255, 0.7);
        text-decoration: none;
        transition: all 0.3s ease;
        display: block;
        margin-bottom: 0.75rem;
        padding: 0.2rem 0;
      }

      .footer-links a:hover {
        color: white;
        transform: translateX(8px);
      }

      .footer-links i {
        width: 24px;
        text-align: center;
        margin-right: 10px;
        transition: all 0.3s ease;
      }

      .footer-links a:hover i {
        color: var(--primary);
      }

      .social-icon {
        width: 40px;
        height: 40px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.1);
        color: white;
        transition: all 0.3s ease;
        margin-right: 0.75rem;
      }

      .social-icon:hover {
        background: var(--primary);
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }

      /* Back to top button */
      .back-to-top {
        position: fixed;
        bottom: 40px;
        right: 40px;
        width: 56px;
        height: 56px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        z-index: 99;
        opacity: 0;
        visibility: hidden;
        transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        background: linear-gradient(135deg, #f44336, #ff6b35);
        color: white;
        border: none;
      }

      .back-to-top:hover {
        transform: translateY(-5px) scale(1.1);
      }

      .back-to-top.active {
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
      }

      /* Responsive adjustments */
      @media (max-width: 992px) {
        .hero-section {
          padding: 5rem 0 3rem;
          clip-path: polygon(0 0, 100% 0, 100% 95%, 0 100%);
        }

        .footer {
          clip-path: polygon(0 5%, 100% 0, 100% 100%, 0 100%);
        }
      }

      @media (max-width: 768px) {
        body {
          padding-top: 70px;
        }

        .hero-section {
          padding: 4rem 0 2rem;
          clip-path: polygon(0 0, 100% 0, 100% 97%, 0 100%);
        }

        .nav-link {
          padding: 0.5rem 1rem;
          margin: 0.2rem 0;
        }

        .back-to-top {
          width: 50px;
          height: 50px;
          font-size: 1.25rem;
          bottom: 20px;
          right: 20px;
        }
      }

      .hero-wave {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        overflow: hidden;
        line-height: 0;
        transform: rotate(180deg);
      }

      .hero-wave svg {
        position: relative;
        display: block;
        width: calc(100% + 1.3px);
        height: 120px;
      }

      .hero-wave .shape-fill {
        fill: #f8fafc;
      }
      /* ================================================= */
      /* PERBAIKAN BUG WARNA BIRU PADA DROPDOWN TAMPILAN   */
      /* ================================================= */
      .dropdown-menu .dropdown-item:hover,
      .dropdown-menu .dropdown-item:focus {
        background-color: #f44336; /* Warna merah sesuai tema */
        color: white; /* Warna teks menjadi putih agar terbaca */
      }
    </style>
  </head>
  <body>
    <header id="navbar-placeholder"></header>

    <!-- Hero Section -->
    <section class="hero-section">
      <div class="container position-relative">
        <div class="row">
          <div
            class="col-12 text-center"
            data-aos="fade-up"
            data-aos-duration="800"
          >
            <h1 class="hero-title animate__animated animate__fadeInDown">
              <span class="title-highlight">Statistik</span> Kependudukan
            </h1>
            <p
              class="hero-subtitle animate__animated animate__fadeIn animate__delay-1s"
            >
              Data perkembangan jumlah penduduk Kelurahan Tanjungpinang Kota
              tahun 2020-2023
            </p>
            <a
              href="#data-statistik"
              class="btn btn-light btn-lg rounded-pill px-4 animate__animated animate__fadeInUp animate__delay-1s"
            >
              <i class="bi bi-arrow-down me-2"></i> Lihat Statistik
            </a>
          </div>
        </div>
      </div>

      <div class="hero-wave">
        <svg viewBox="0 0 1200 120" preserveAspectRatio="none">
          <path
            d="M0,0V46.29c47.79,22.2,103.59,32.17,158,28,70.36-5.37,136.33-33.31,206.8-37.5C438.64,32.43,512.34,53.67,583,72.05c69.27,18,138.3,24.88,209.4,13.08,36.15-6,69.85-17.84,104.45-29.34C989.49,25,1113-14.29,1200,52.47V0Z"
            opacity=".25"
            class="shape-fill"
          ></path>
          <path
            d="M0,0V15.81C13,36.92,27.64,56.86,47.69,72.05,99.41,111.27,165,111,224.58,91.58c31.15-10.15,60.09-26.07,89.67-39.8,40.92-19,84.73-46,130.83-49.67,36.26-2.85,70.9,9.42,98.6,31.56,31.77,25.39,62.32,62,103.63,73,40.44,10.79,81.35-6.69,119.13-24.28s75.16-39,116.92-43.05c59.73-5.85,113.28,22.88,168.9,38.84,30.2,8.66,59,6.17,87.09-7.5,22.43-10.89,48-26.93,60.65-49.24V0Z"
            opacity=".5"
            class="shape-fill"
          ></path>
          <path
            d="M0,0V5.63C149.93,59,314.09,71.32,475.83,42.57c43-7.64,84.23-20.12,127.61-26.46,59-8.63,112.48,12.24,165.56,35.4C827.93,77.22,886,95.24,951.2,90c86.53-7,172.46-45.71,248.8-84.81V0Z"
            class="shape-fill"
          ></path>
        </svg>
      </div>
    </section>

    <!-- Main Content -->
    <div class="container py-4" id="data-statistik">
      <!-- Breadcrumb -->
      <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb animate__animated animate__fadeIn">
          <li class="breadcrumb-item">
            <a href="#"><i class="bi bi-house"></i></a>
          </li>
          <li class="breadcrumb-item"><a href="#">Data</a></li>
          <li class="breadcrumb-item active" aria-current="page">
            Statistik Penduduk
          </li>
        </ol>
      </nav>

      <!-- Page Title -->
      <div class="row mb-5">
        <div class="col-12" data-aos="fade-up">
          <h2 class="section-title">Perkembangan Jumlah Penduduk</h2>
          <p class="text-muted">
            Data statistik kependudukan tahun 2020-2023 dengan analisis tren dan
            proyeksi
          </p>
        </div>
      </div>

      <!-- Grafik dan Ringkasan -->
      <section class="mb-5">
        <div class="row">
          <div
            class="col-lg-8 mb-4 mb-lg-0"
            data-aos="fade-right"
            data-aos-delay="200"
          >
            <div class="stat-card card h-100">
              <div class="card-body">
                <div
                  class="d-flex justify-content-between align-items-center mb-4"
                >
                  <h3 class="card-title mb-0">
                    <i class="bi bi-graph-up me-2"></i> Grafik Perkembangan
                    Penduduk
                  </h3>
                  <div class="dropdown">
                    <button
                      class="btn btn-sm btn-outline-primary dropdown-toggle"
                      type="button"
                      id="chartDropdown"
                      data-bs-toggle="dropdown"
                      aria-expanded="false"
                    >
                      <i class="bi bi-sliders"></i> Tampilan
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="chartDropdown">
                      <li>
                        <a class="dropdown-item" href="#" data-chart-type="line"
                          >Garis</a
                        >
                      </li>
                      <li>
                        <a class="dropdown-item" href="#" data-chart-type="bar"
                          >Batang</a
                        >
                      </li>
                    </ul>
                  </div>
                </div>
                <div class="chart-container">
                  <canvas id="populationChart"></canvas>
                </div>
                <div class="mt-3 text-end">
                  <small class="text-muted"
                    ><i class="bi bi-info-circle me-1"></i> Klik dan seret untuk
                    memperbesar area tertentu</small
                  >
                </div>
              </div>
            </div>
          </div>

          <div class="col-lg-4" data-aos="fade-left" data-aos-delay="200">
            <div class="stat-card card h-100">
              <div class="card-body">
                <h3 class="card-title mb-4">
                  <i class="bi bi-clipboard-data me-2"></i> Ringkasan Statistik
                </h3>

                <div class="text-center mb-4 floating">
                  <h4 class="text-muted mb-1">Total Penduduk 2023</h4>
                  <h2 class="fw-bold text-primary counter" data-target="4902">
                    0
                  </h2>
                  <p class="text-muted">Jiwa</p>
                  <div class="progress mt-2" style="height: 6px">
                    <div
                      class="progress-bar bg-primary"
                      role="progressbar"
                      style="width: 94.5%"
                      aria-valuenow="94.5"
                      aria-valuemin="0"
                      aria-valuemax="100"
                    ></div>
                  </div>
                  <small class="text-muted">94.5% dari tahun 2020</small>
                </div>

                <div class="mb-4">
                  <h5 class="fw-bold mb-3 stat-summary-title">
                    <i class="bi bi-calendar-range me-2"></i> Periode Analisis
                  </h5>
                  <ul class="list-group list-group-flush">
                    <li
                      class="list-group-item d-flex justify-content-between align-items-center"
                    >
                      <span>2020-2023</span>
                      <span
                        class="badge bg-danger rounded-pill animate__animated animate__pulse animate__infinite"
                        >-5.5%</span
                      >
                    </li>
                    <li
                      class="list-group-item d-flex justify-content-between align-items-center"
                    >
                      <span>2021-2022</span>
                      <span class="badge bg-danger rounded-pill">-2.9%</span>
                    </li>
                    <li
                      class="list-group-item d-flex justify-content-between align-items-center"
                    >
                      <span>2022-2023</span>
                      <span class="badge bg-danger rounded-pill">-0.7%</span>
                    </li>
                  </ul>
                </div>

                <div>
                  <h5 class="fw-bold mb-3 stat-summary-title">
                    <i class="bi bi-gender-ambiguous me-2"></i> Komposisi Gender
                  </h5>
                  <div class="d-flex justify-content-around text-center">
                    <div
                      class="animate__animated animate__fadeIn animate__delay-1s"
                    >
                      <div class="mb-2">
                        <i class="bi bi-gender-male text-primary fs-3"></i>
                      </div>
                      <h5 class="fw-bold gender-percentage-male">49.2%</h5>
                      <p class="text-muted small">Laki-laki</p>
                      <div class="progress" style="height: 4px">
                        <div
                          class="progress-bar bg-primary"
                          role="progressbar"
                          style="width: 49.2%"
                          aria-valuenow="49.2"
                          aria-valuemin="0"
                          aria-valuemax="100"
                        ></div>
                      </div>
                    </div>
                    <div
                      class="animate__animated animate__fadeIn animate__delay-2s"
                    >
                      <div class="mb-2">
                        <i class="bi bi-gender-female text-danger fs-3"></i>
                      </div>
                      <h5 class="fw-bold gender-percentage-female">50.8%</h5>
                      <p class="text-muted small">Perempuan</p>
                      <div class="progress" style="height: 4px">
                        <div
                          class="progress-bar bg-danger"
                          role="progressbar"
                          style="width: 50.8%"
                          aria-valuenow="50.8"
                          aria-valuemin="0"
                          aria-valuemax="100"
                        ></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Data Per Tahun -->
      <section class="mb-5">
        <h3 class="section-title" data-aos="fade-up">Data Per Tahun</h3>
        <div class="row">
          <div
            class="col-md-6 col-lg-3 mb-4"
            data-aos="fade-up"
            data-aos-delay="100"
          >
            <div class="stat-card card h-100 year-card">
              <div class="card-body">
                <div
                  class="d-flex justify-content-between align-items-start mb-2"
                >
                  <h4 class="card-title text-primary">2020</h4>
                  <span class="badge bg-primary">Tertinggi</span>
                </div>
                <h2 class="fw-bold mb-3 counter" data-target="5188">0</h2>
                <p class="text-muted">Jiwa</p>
                <p class="small text-muted mb-0">
                  <i class="bi bi-info-circle me-1"></i> Basis data awal
                </p>
              </div>
            </div>
          </div>

          <div
            class="col-md-6 col-lg-3 mb-4"
            data-aos="fade-up"
            data-aos-delay="200"
          >
            <div class="stat-card card h-100 year-card">
              <div class="card-body">
                <h4 class="card-title text-primary">2021</h4>
                <h2 class="fw-bold mb-3 counter" data-target="5086">0</h2>
                <p class="text-muted">Jiwa</p>
                <div class="d-flex align-items-center mt-3">
                  <i
                    class="bi bi-arrow-down-circle-fill text-danger me-2 fs-5"
                  ></i>
                  <span class="percentage-change decrease">Penurunan 2.0%</span>
                </div>
                <div class="progress mt-2" style="height: 4px">
                  <div
                    class="progress-bar bg-danger"
                    role="progressbar"
                    style="width: 98%"
                    aria-valuenow="98"
                    aria-valuemin="0"
                    aria-valuemax="100"
                  ></div>
                </div>
              </div>
            </div>
          </div>

          <div
            class="col-md-6 col-lg-3 mb-4"
            data-aos="fade-up"
            data-aos-delay="300"
          >
            <div class="stat-card card h-100 year-card">
              <div class="card-body">
                <h4 class="card-title text-primary">2022</h4>
                <h2 class="fw-bold mb-3 counter" data-target="4939">0</h2>
                <p class="text-muted">Jiwa</p>
                <div class="d-flex align-items-center mt-3">
                  <i
                    class="bi bi-arrow-down-circle-fill text-danger me-2 fs-5"
                  ></i>
                  <span class="percentage-change decrease">Penurunan 2.9%</span>
                </div>
                <div class="progress mt-2" style="height: 4px">
                  <div
                    class="progress-bar bg-danger"
                    role="progressbar"
                    style="width: 97.1%"
                    aria-valuenow="97.1"
                    aria-valuemin="0"
                    aria-valuemax="100"
                  ></div>
                </div>
              </div>
            </div>
          </div>

          <div
            class="col-md-6 col-lg-3 mb-4"
            data-aos="fade-up"
            data-aos-delay="400"
          >
            <div class="stat-card card h-100 year-card">
              <div class="card-body">
                <div
                  class="d-flex justify-content-between align-items-start mb-2"
                >
                  <h4 class="card-title text-primary">2023</h4>
                  <span class="badge bg-secondary">Terbaru</span>
                </div>
                <h2 class="fw-bold mb-3 counter" data-target="4902">0</h2>
                <p class="text-muted">Jiwa</p>
                <div class="d-flex align-items-center mt-3">
                  <i
                    class="bi bi-arrow-down-circle-fill text-danger me-2 fs-5"
                  ></i>
                  <span class="percentage-change decrease">Penurunan 0.7%</span>
                </div>
                <div class="progress mt-2" style="height: 4px">
                  <div
                    class="progress-bar bg-danger"
                    role="progressbar"
                    style="width: 99.3%"
                    aria-valuenow="99.3"
                    aria-valuemin="0"
                    aria-valuemax="100"
                  ></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Analisis Data -->
      <section class="mb-5">
        <h3 class="section-title" data-aos="fade-up">Analisis Data</h3>
        <div class="stat-card card" data-aos="fade-up">
          <div class="card-body">
            <div class="alert alert-info border-0">
              <div class="d-flex">
                <div class="flex-shrink-0 me-3">
                  <i class="bi bi-info-circle-fill fs-1 text-primary"></i>
                </div>
                <div>
                  <h4 class="alert-heading">Tren Kependudukan 2020-2023</h4>
                  <p>
                    Terdapat tren penurunan jumlah penduduk sebesar
                    <strong>5.5%</strong> dalam 4 tahun terakhir. Berikut faktor
                    yang mempengaruhi:
                  </p>
                  <div class="row">
                    <div class="col-md-6">
                      <div class="d-flex mb-3">
                        <div class="flex-shrink-0 me-3 text-danger">
                          <i
                            class="bi bi-arrow-down-right-circle-fill fs-4"
                          ></i>
                        </div>
                        <div>
                          <h5 class="mb-1">Faktor Penurunan</h5>
                          <ul class="mb-0">
                            <li>Perpindahan penduduk ke wilayah sekitar</li>
                            <li>Penurunan angka kelahiran</li>
                            <li>Perubahan batas administrasi wilayah</li>
                          </ul>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="d-flex mb-3">
                        <div class="flex-shrink-0 me-3 text-success">
                          <i class="bi bi-graph-up-arrow fs-4"></i>
                        </div>
                        <div>
                          <h5 class="mb-1">Proyeksi 2024</h5>
                          <ul class="mb-0">
                            <li>
                              Diperkirakan stabil di angka 4,850-4,900 jiwa
                            </li>
                            <li>Program pemukiman baru di wilayah timur</li>
                            <li>Peningkatan layanan kesehatan dasar</li>
                          </ul>
                        </div>
                      </div>
                    </div>
                  </div>
                  <hr />
                  <p class="mb-0">
                    <i class="bi bi-calendar-check me-1"></i> Data diperbarui:
                    15 Januari 2024 | Sumber: Dinas Kependudukan dan Catatan
                    Sipil
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Detail Tambahan -->
      <section class="mb-5">
        <h3 class="section-title" data-aos="fade-up">Detail Tambahan</h3>
        <div class="row">
          <div class="col-md-6 mb-4" data-aos="fade-right">
            <div class="stat-card card h-100">
              <div class="card-body">
                <h4 class="card-title mb-4">
                  <i class="bi bi-people-fill me-2"></i> Kepadatan per RT
                </h4>
                <div class="chart-container">
                  <canvas id="densityChart"></canvas>
                </div>
                <div class="mt-3">
                  <small class="text-muted"
                    ><i class="bi bi-lightbulb me-1"></i> RT 05 memiliki
                    kepadatan tertinggi dengan 320 jiwa per hektar</small
                  >
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-6 mb-4" data-aos="fade-left">
            <div class="stat-card card h-100">
              <div class="card-body">
                <h4 class="card-title mb-4">
                  <i class="bi bi-pie-chart-fill me-2"></i> Distribusi Usia
                </h4>
                <div class="chart-container">
                  <canvas id="ageChart"></canvas>
                </div>
                <div class="mt-3">
                  <small class="text-muted"
                    ><i class="bi bi-lightbulb me-1"></i> 28% penduduk berusia
                    produktif (20-40 tahun)</small
                  >
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Download Section -->
      <section class="mb-5" data-aos="fade-up">
        <h3 class="section-title">Unduh Data</h3>
        <div class="stat-card card pulse">
          <div class="card-body">
            <div class="row align-items-center">
              <div class="col-md-8">
                <h4 class="mb-3">
                  <i class="bi bi-database me-2"></i> Data Lengkap Statistik
                </h4>
                <p class="text-muted">
                  Unduh dataset lengkap dalam berbagai format untuk analisis
                  lebih lanjut.
                </p>
                <div class="d-flex align-items-center">
                  <div class="me-3">
                    <i class="bi bi-shield-check text-success me-2"></i>
                    <small class="text-muted">Data Terverifikasi</small>
                  </div>
                  <div>
                    <i class="bi bi-calendar2-check text-primary me-2"></i>
                    <small class="text-muted">Update Terakhir: Jan 2024</small>
                  </div>
                </div>
              </div>
              <div class="col-md-4 text-md-end mt-3 mt-md-0">
                <a
                  href="#"
                  class="btn btn-primary me-2 mb-2 animate__animated animate__pulse animate__infinite animate__slower"
                >
                  <i class="bi bi-file-earmark-excel me-1"></i> Excel
                </a>
                <a href="#" class="btn btn-danger mb-2">
                  <i class="bi bi-file-earmark-pdf me-1"></i> PDF
                </a>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <footer class="bg-dark text-light pt-5 pb-4">
      <div class="container">
        <div class="row justify-content-between align-items-start">
          <!-- Hubungi Kami -->
          <div class="col-md-4 mb-4">
            <h5 class="fw-bold text-danger mb-3">Hubungi Kami</h5>
            <div class="d-flex align-items-start mb-4">
              <div class="me-3">
                <img
                  src="assets/images/logo-tanjungpinang.png"
                  alt="Logo"
                  style="width: 80px; height: auto"
                  class="img-fluid"
                />
              </div>
              <div class="small">
                <p class="fw-bold mb-1">Kelurahan Tanjungpinang Kota</p>
                <p class="mb-1">Kecamatan Tanjungpinang Kota</p>
              </div>
            </div>
            <ul class="list-unstyled small">
              <li class="mb-2">
                <i class="bi bi-geo-alt-fill me-2 text-danger"></i>
                Jl. Mesjid No.7, Tanjungpinang Kota, Kota Tanjungpinang,
                Kepulauan Riau
              </li>
              <li class="mb-2">
                <i class="bi bi-envelope-fill me-2 text-danger"></i>
                tpitimurkotakel@tanjungpinangkota.go.id
              </li>
              <li class="mb-3">
                <i class="bi bi-telephone-fill me-2 text-danger"></i>
                (0771) 1234567
              </li>
              <li>
                <div class="d-flex gap-2">
                  <a
                    href="#"
                    class="btn btn-outline-light btn-sm rounded-circle"
                  >
                    <i class="bi bi-facebook"></i>
                  </a>
                  <a
                    href="#"
                    class="btn btn-outline-light btn-sm rounded-circle"
                  >
                    <i class="bi bi-instagram"></i>
                  </a>
                  <a
                    href="#"
                    class="btn btn-outline-light btn-sm rounded-circle"
                  >
                    <i class="bi bi-twitter"></i>
                  </a>
                  <a
                    href="#"
                    class="btn btn-outline-light btn-sm rounded-circle"
                  >
                    <i class="bi bi-youtube"></i>
                  </a>
                </div>
              </li>
            </ul>
          </div>

          <!-- Menu Utama -->
          <div class="col-md-3 mb-4">
            <h5 class="fw-bold text-danger border-bottom pb-2 mb-3">
              Menu Utama
            </h5>
            <ul class="list-unstyled small">
              <li class="mb-2">
                <a
                  href="index.html"
                  class="text-light text-decoration-none d-flex align-items-center"
                >
                  <i class="bi bi-house-door-fill me-2"></i> Beranda
                </a>
              </li>
              <li class="mb-2">
                <a
                  href="berita.html"
                  class="text-light text-decoration-none d-flex align-items-center"
                >
                  <i class="bi bi-newspaper me-2"></i> Berita
                </a>
              </li>
              <li class="mb-2">
                <a
                  href="download-area.html"
                  class="text-light text-decoration-none d-flex align-items-center"
                >
                  <i class="bi bi-download me-2"></i> Download
                </a>
              </li>
              <li class="mb-2">
                <a
                  href="galeri.html"
                  class="text-light text-decoration-none d-flex align-items-center"
                >
                  <i class="bi bi-images me-2"></i> Galeri
                </a>
              </li>
              <li class="mb-2">
                <a
                  href="data-statistik.html"
                  class="text-light text-decoration-none d-flex align-items-center"
                >
                  <i class="bi bi-bar-chart-fill me-2"></i> Data Statistik
                </a>
              </li>
              <li class="mb-2">
                <a
                  href="peta-kelurahan.html"
                  class="text-light text-decoration-none d-flex align-items-center"
                >
                  <i class="bi bi-map-fill me-2"></i> Peta Kelurahan
                </a>
              </li>
            </ul>
          </div>

          <!-- Berita Populer -->
          <div class="col-md-4 mb-4">
            <h5 class="fw-bold text-danger border-bottom pb-2 mb-3">
              Berita Populer
            </h5>
            <div class="mb-4">
              <h6 class="fw-bold mb-1">
                Selamat Datang di Website Kelurahan Tanjungpinang Kota
              </h6>
              <p class="text-secondary small mb-0">
                <i class="bi bi-calendar me-2"></i>Rabu, 31 Agustus 2022
              </p>
            </div>
            <div class="mb-4">
              <h6 class="fw-bold mb-1">
                Penghargaan Kepala Daerah Perempuan Inspiratif dari Tempo Media
                Grup
              </h6>
              <p class="text-secondary small mb-0">
                <i class="bi bi-calendar me-2"></i>Rabu, 28 September 2022
              </p>
            </div>
            <div class="mb-4">
              <h6 class="fw-bold mb-1">
                Penyerahan Simbolis Kartu Identitas Anak (KIA)
              </h6>
              <p class="text-secondary small mb-0">
                <i class="bi bi-calendar me-2"></i>Kamis, 15 Desember 2022
              </p>
            </div>
          </div>
        </div>

        <!-- Footer Bottom Tengah -->
        <hr class="border-secondary" />
        <div class="text-center pt-2">
          <small
            >Design by
            <a href="#" class="text-danger fw-bold"
              >Mahasiswa Teknik Informatika</a
            >
            &copy;2025</small
          >
        </div>
      </div>
    </footer>

    <!-- Back to Top Button -->
    <button id="backToTop" class="back-to-top">
      <i class="bi bi-arrow-up"></i>
    </button>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- AOS Animation -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="assets/js/nav.js"></script>

    <script>
      // Initialize AOS animation
      AOS.init({
        duration: 800,
        easing: "ease-in-out",
        once: true,
        offset: 100,
      });

      // Back to top button
      const backToTopButton = document.getElementById("backToTop");

      window.addEventListener("scroll", function () {
        if (window.pageYOffset > 300) {
          backToTopButton.classList.add("active");
        } else {
          backToTopButton.classList.remove("active");
        }
      });

      backToTopButton.addEventListener("click", function (e) {
        e.preventDefault();
        window.scrollTo({
          top: 0,
          behavior: "smooth",
        });
      });

      // Animated counter (Versi Perbaikan Final)
      const counters = document.querySelectorAll(".counter");
      const speed = 400; // Durasi animasi dalam milidetik

      counters.forEach((counter) => {
        const animate = () => {
          const target = +counter.getAttribute("data-target");
          // INI BAGIAN YANG DIPERBAIKI: Mengganti titik (.), bukan koma (,)
          let current = +counter.innerText.replace(/\./g, "");
          const increment = target / (speed / 16);

          if (current < target) {
            current += increment;
            counter.innerText = Math.ceil(current).toLocaleString("id-ID");
            requestAnimationFrame(animate);
          } else {
            counter.innerText = target.toLocaleString("id-ID");
          }
        };

        // Intersection Observer untuk memulai animasi saat elemen terlihat
        const observer = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                animate();
                observer.unobserve(entry.target);
              }
            });
          },
          {
            threshold: 0.5,
          }
        );

        observer.observe(counter);
      });

      // Chart data and initialization
      document.addEventListener("DOMContentLoaded", function () {
        // Main population chart
        const populationCtx = document
          .getElementById("populationChart")
          .getContext("2d");
        let populationChart = new Chart(populationCtx, {
          type: "line",
          data: {
            labels: ["2020", "2021", "2022", "2023"],
            datasets: [
              {
                label: "Jumlah Penduduk",
                data: [5188, 5086, 4939, 4902],
                backgroundColor:
                  "rgba(244, 67, 54, 0.2)" /* Warna MERAH transparan */,
                borderColor: "#f44336" /* Warna MERAH solid */,
                hoverBackgroundColor: "rgba(244, 67, 54, 0.9)",
                borderWidth: 3,
                tension: 0.3,
                fill: true,
                pointBackgroundColor: "#fff",
                pointBorderColor: "#f44336" /* Warna MERAH solid */,
                pointBorderWidth: 2,
                pointRadius: 5,
                pointHoverRadius: 7,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                display: false,
              },
              tooltip: {
                callbacks: {
                  label: function (context) {
                    return `Jumlah: ${context.raw.toLocaleString(
                      "id-ID"
                    )} jiwa`;
                  },
                  afterLabel: function (context) {
                    if (context.dataIndex > 0) {
                      const prevValue =
                        context.dataset.data[context.dataIndex - 1];
                      const change = (
                        ((context.raw - prevValue) / prevValue) *
                        100
                      ).toFixed(1);
                      return `Perubahan: ${change}%`;
                    }
                    return "";
                  },
                },
                backgroundColor: "rgba(0,0,0,0.8)",
                titleFont: {
                  size: 14,
                  weight: "bold",
                },
                bodyFont: {
                  size: 13,
                },
                padding: 12,
                cornerRadius: 8,
              },
              zoom: {
                pan: {
                  enabled: true,
                  mode: "xy",
                },
                zoom: {
                  wheel: {
                    enabled: true,
                  },
                  pinch: {
                    enabled: true,
                  },
                  mode: "xy",
                },
              },
            },
            scales: {
              y: {
                beginAtZero: false,
                grid: {
                  drawBorder: false,
                  color: "rgba(0,0,0,0.05)",
                },
                ticks: {
                  callback: function (value) {
                    return value.toLocaleString("id-ID");
                  },
                  font: {
                    weight: "500",
                  },
                },
              },
              x: {
                grid: {
                  display: false,
                },
                ticks: {
                  font: {
                    weight: "500",
                  },
                },
              },
            },
            interaction: {
              intersect: false,
              mode: "index",
            },
          },
        });

        // Density chart
        const densityCtx = document
          .getElementById("densityChart")
          .getContext("2d");
        new Chart(densityCtx, {
          type: "bar",
          data: {
            labels: [
              "RT 01",
              "RT 02",
              "RT 03",
              "RT 04",
              "RT 05",
              "RT 06",
              "RT 07",
              "RT 08",
            ],
            datasets: [
              {
                label: "Jumlah Penduduk",
                data: [280, 310, 295, 265, 320, 305, 290, 275],
                backgroundColor: [
                  "rgba(13, 110, 253, 0.7)",
                  "rgba(13, 110, 253, 0.7)",
                  "rgba(13, 110, 253, 0.7)",
                  "rgba(13, 110, 253, 0.7)",
                  "rgba(220, 53, 69, 0.7)",
                  "rgba(13, 110, 253, 0.7)",
                  "rgba(13, 110, 253, 0.7)",
                  "rgba(13, 110, 253, 0.7)",
                ],
                borderColor: [
                  "#0d6efd",
                  "#0d6efd",
                  "#0d6efd",
                  "#0d6efd",
                  "#dc3545",
                  "#0d6efd",
                  "#0d6efd",
                  "#0d6efd",
                ],
                borderWidth: 1,
                borderRadius: 4,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                display: false,
              },
              tooltip: {
                callbacks: {
                  label: function (context) {
                    return `Jumlah: ${context.raw} jiwa`;
                  },
                },
              },
            },
            scales: {
              y: {
                beginAtZero: true,
                grid: {
                  drawBorder: false,
                  color: "rgba(0,0,0,0.05)",
                },
              },
              x: {
                grid: {
                  display: false,
                },
              },
            },
          },
        });

        // Age distribution chart
        const ageCtx = document.getElementById("ageChart").getContext("2d");
        new Chart(ageCtx, {
          type: "doughnut",
          data: {
            labels: [
              "0-17 Tahun",
              "18-25 Tahun",
              "26-40 Tahun",
              "41-60 Tahun",
              "60+ Tahun",
            ],
            datasets: [
              {
                data: [22, 18, 28, 20, 12],
                backgroundColor: [
                  "rgba(13, 110, 253, 0.7)",
                  "rgba(25, 135, 84, 0.7)",
                  "rgba(220, 53, 69, 0.7)",
                  "rgba(255, 193, 7, 0.7)",
                  "rgba(108, 117, 125, 0.7)",
                ],
                borderColor: [
                  "#0d6efd",
                  "#198754",
                  "#dc3545",
                  "#ffc107",
                  "#6c757d",
                ],
                borderWidth: 1,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            cutout: "70%",
            plugins: {
              legend: {
                position: "right",
                labels: {
                  boxWidth: 12,
                  padding: 20,
                  font: {
                    size: 12,
                  },
                },
              },
              tooltip: {
                callbacks: {
                  label: function (context) {
                    const label = context.label || "";
                    const value = context.raw || 0;
                    const total = context.dataset.data.reduce(
                      (a, b) => a + b,
                      0
                    );
                    const percentage = Math.round((value / total) * 100);
                    return `${label}: ${value}% (${percentage}% dari total)`;
                  },
                },
              },
            },
          },
        });

        // Chart type switcher
        document.querySelectorAll("[data-chart-type]").forEach((button) => {
          button.addEventListener("click", function (e) {
            e.preventDefault();
            const type = this.getAttribute("data-chart-type");
            const dataset = populationChart.data.datasets[0];

            populationChart.config.type = type;

            // Menyesuaikan style berdasarkan tipe grafik (dengan warna MERAH)
            if (type === "bar") {
              // Style untuk grafik batang
              dataset.backgroundColor = "rgba(244, 67, 54, 0.7)";
              dataset.borderColor = "#f44336";
              dataset.hoverBackgroundColor = "rgba(244, 67, 54, 0.9)";
              dataset.hoverBorderColor = "#f44336"; // <-- INILAH PERBAIKANNYA
              dataset.fill = false;
            } else {
              // Style untuk grafik garis
              dataset.backgroundColor = "rgba(244, 67, 54, 0.2)";
              dataset.borderColor = "#f44336";
              dataset.fill = true;
            }

            populationChart.update();
          });
        });
      });
    </script>
  </body>
</html>
